{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anjal\\\\Downloads\\\\lms\\\\lms\\\\src\\\\pages\\\\StudentDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { collection, onSnapshot, doc, updateDoc, getDoc, setDoc, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../utils/firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StudentDashboard() {\n  _s();\n  var _tests$find, _tests$find2, _tests$find3, _tests$find4;\n  const {\n    user\n  } = useAuth();\n\n  // State management\n  const [courses, setCourses] = useState([]);\n  const [tests, setTests] = useState([]);\n  const [purchased, setPurchased] = useState([]);\n  const [attemptTestId, setAttemptTestId] = useState(null);\n  const [attemptAnswers, setAttemptAnswers] = useState([]);\n  const [timer, setTimer] = useState(0);\n  const [showResult, setShowResult] = useState(false);\n  const [score, setScore] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [userProfile, setUserProfile] = useState(null);\n\n  // Fetch user profile and purchased courses\n  useEffect(() => {\n    if (!user) return;\n    const fetchUserProfile = async () => {\n      try {\n        const userDoc = await getDoc(doc(db, 'users', user.uid));\n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          setUserProfile(userData);\n          setPurchased(userData.purchasedCourses || []);\n        }\n      } catch (error) {\n        console.error('Error fetching user profile:', error);\n      }\n    };\n    fetchUserProfile();\n  }, [user]);\n\n  // Real-time listener for courses\n  useEffect(() => {\n    const unsubscribe = onSnapshot(collection(db, 'courses'), snapshot => {\n      const coursesData = [];\n      snapshot.forEach(doc => {\n        coursesData.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      // Sort by upload date (newest first)\n      coursesData.sort((a, b) => {\n        var _a$uploadDate, _a$uploadDate$toDate, _b$uploadDate, _b$uploadDate$toDate;\n        const dateA = ((_a$uploadDate = a.uploadDate) === null || _a$uploadDate === void 0 ? void 0 : (_a$uploadDate$toDate = _a$uploadDate.toDate) === null || _a$uploadDate$toDate === void 0 ? void 0 : _a$uploadDate$toDate.call(_a$uploadDate)) || new Date(a.uploadDate);\n        const dateB = ((_b$uploadDate = b.uploadDate) === null || _b$uploadDate === void 0 ? void 0 : (_b$uploadDate$toDate = _b$uploadDate.toDate) === null || _b$uploadDate$toDate === void 0 ? void 0 : _b$uploadDate$toDate.call(_b$uploadDate)) || new Date(b.uploadDate);\n        return dateB - dateA;\n      });\n      setCourses(coursesData);\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Real-time listener for tests\n  useEffect(() => {\n    const unsubscribe = onSnapshot(collection(db, 'tests'), snapshot => {\n      const testsData = [];\n      snapshot.forEach(doc => {\n        testsData.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      setTests(testsData);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Purchase handler\n  const handlePurchase = async courseId => {\n    if (!user) return;\n    try {\n      var _courses$find, _courses$find2;\n      const newPurchased = [...purchased, courseId];\n      setPurchased(newPurchased);\n\n      // Update user's purchased courses in Firebase\n      await updateDoc(doc(db, 'users', user.uid), {\n        purchasedCourses: newPurchased\n      });\n\n      // Log the purchase\n      await addDoc(collection(db, 'purchases'), {\n        userId: user.uid,\n        userEmail: user.email,\n        courseId: courseId,\n        courseTitle: (_courses$find = courses.find(c => c.id === courseId)) === null || _courses$find === void 0 ? void 0 : _courses$find.title,\n        purchaseDate: serverTimestamp(),\n        amount: ((_courses$find2 = courses.find(c => c.id === courseId)) === null || _courses$find2 === void 0 ? void 0 : _courses$find2.price) || 0\n      });\n      alert('Course purchased successfully!');\n    } catch (error) {\n      console.error('Error purchasing course:', error);\n      alert('Error purchasing course. Please try again.');\n    }\n  };\n\n  // Get free course handler\n  const handleGetFree = async courseId => {\n    if (!user) return;\n    try {\n      var _courses$find3;\n      const newPurchased = [...purchased, courseId];\n      setPurchased(newPurchased);\n\n      // Update user's purchased courses in Firebase\n      await updateDoc(doc(db, 'users', user.uid), {\n        purchasedCourses: newPurchased\n      });\n\n      // Log the free course access\n      await addDoc(collection(db, 'purchases'), {\n        userId: user.uid,\n        userEmail: user.email,\n        courseId: courseId,\n        courseTitle: (_courses$find3 = courses.find(c => c.id === courseId)) === null || _courses$find3 === void 0 ? void 0 : _courses$find3.title,\n        purchaseDate: serverTimestamp(),\n        amount: 0,\n        type: 'free'\n      });\n      alert('Free course added to your library!');\n    } catch (error) {\n      console.error('Error getting free course:', error);\n      alert('Error getting free course. Please try again.');\n    }\n  };\n\n  // Test attempt handlers\n  const startAttempt = testId => {\n    setAttemptTestId(testId);\n    setAttemptAnswers(Array(tests.find(t => t.id === testId).questions.length).fill(null));\n    setShowResult(false);\n    setScore(0);\n    setTimer(60); // 60 seconds per test\n  };\n  useEffect(() => {\n    let interval = null;\n    if (attemptTestId && timer > 0) {\n      interval = setInterval(() => setTimer(t => t - 1), 1000);\n    }\n    if (timer === 0 && attemptTestId) {\n      handleSubmitAttempt();\n    }\n    return () => clearInterval(interval);\n    // eslint-disable-next-line\n  }, [attemptTestId, timer]);\n  const handleAttemptChange = (qIdx, value) => {\n    setAttemptAnswers(prev => {\n      const updated = [...prev];\n      updated[qIdx] = Number(value);\n      return updated;\n    });\n  };\n  const handleSubmitAttempt = async () => {\n    const test = tests.find(t => t.id === attemptTestId);\n    let correct = 0;\n    test.questions.forEach((q, idx) => {\n      if (attemptAnswers[idx] === q.answer) correct++;\n    });\n    setScore(correct);\n    setShowResult(true);\n\n    // Save test result to Firebase\n    try {\n      await addDoc(collection(db, 'testResults'), {\n        userId: user.uid,\n        userEmail: user.email,\n        testId: attemptTestId,\n        testTitle: test.title,\n        score: correct,\n        totalQuestions: test.questions.length,\n        answers: attemptAnswers,\n        completedAt: serverTimestamp()\n      });\n    } catch (error) {\n      console.error('Error saving test result:', error);\n    }\n    setAttemptTestId(null);\n    setTimer(0);\n  };\n  const formatDate = timestamp => {\n    if (!timestamp) return 'Unknown';\n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\n    return date.toLocaleDateString();\n  };\n  const downloadCourse = course => {\n    // In a real app, this would handle file download from Firebase Storage\n    if (course.fileUrl && course.fileUrl !== '#') {\n      window.open(course.fileUrl, '_blank');\n    } else {\n      alert('Course file not available. Please contact support.');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xl\",\n        children: \"Loading courses...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-green-800 mb-2\",\n      children: \"Student Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-6\",\n      children: [\"Welcome back, \", user === null || user === void 0 ? void 0 : user.email, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 shadow rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold mb-4\",\n          children: [\"Your Courses (\", purchased.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4 max-h-96 overflow-y-auto\",\n          children: purchased.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-400 text-center py-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No courses purchased yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: \"Browse available courses to get started!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this) : courses.filter(c => purchased.includes(c.id)).map(course => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-lg mb-2\",\n              children: course.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: course.details\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Uploaded: \", formatDate(course.uploadDate)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2\",\n                  children: [\"By: \", course.uploaderEmail]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",\n                onClick: () => downloadCourse(course),\n                children: \"Download\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 19\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 shadow rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold mb-4\",\n          children: \"Available Courses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4 max-h-96 overflow-y-auto\",\n          children: courses.filter(c => !purchased.includes(c.id)).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-400 text-center py-8\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"All available courses have been added to your library.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 35\n          }, this) : courses.filter(c => !purchased.includes(c.id)).map(course => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border rounded-lg p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-lg mb-2\",\n              children: course.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 39\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: course.details\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 39\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Uploaded: \", formatDate(course.uploadDate)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2\",\n                  children: [\"By: \", course.uploaderEmail]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 43\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 41\n              }, this), course.price > 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",\n                onClick: () => handlePurchase(course.id),\n                children: [\"Buy \\u20B9\", course.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 43\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700\",\n                onClick: () => handleGetFree(course.id),\n                children: \"Get Free\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 43\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 39\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 shadow rounded-xl mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold mb-4\",\n        children: \"Tests\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4 max-h-96 overflow-y-auto\",\n        children: tests.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-400 text-center py-8\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No tests available at the moment.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 33\n        }, this) : tests.map(test => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border rounded-lg p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-lg mb-2\",\n            children: test.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-2\",\n            children: test.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Questions: \", test.questions.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 39\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700\",\n              onClick: () => startAttempt(test.id),\n              disabled: attemptTestId !== null,\n              children: \"Attempt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 37\n          }, this)]\n        }, test.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 35\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 27\n    }, this), attemptTestId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 rounded-xl shadow-lg w-full max-w-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold mb-4\",\n          children: [\"Attempt Test: \", (_tests$find = tests.find(t => t.id === attemptTestId)) === null || _tests$find === void 0 ? void 0 : _tests$find.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 text-right text-sm text-gray-600\",\n          children: [\"Time left: \", timer, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            handleSubmitAttempt();\n          },\n          children: [(_tests$find2 = tests.find(t => t.id === attemptTestId)) === null || _tests$find2 === void 0 ? void 0 : _tests$find2.questions.map((q, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium mb-2\",\n              children: [\"Q\", idx + 1, \": \", q.question]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: q.options.map((opt, oIdx) => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: `q${idx}`,\n                  value: oIdx,\n                  checked: attemptAnswers[idx] === oIdx,\n                  onChange: () => handleAttemptChange(idx, oIdx),\n                  className: \"mr-2\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 47\n                }, this), opt]\n              }, oIdx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 41\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 39\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-2 mt-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400\",\n              onClick: () => {\n                setAttemptTestId(null);\n                setTimer(0);\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 31\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 29\n    }, this), showResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold mb-4\",\n          children: \"Test Result\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: \"Score:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 35\n          }, this), \" \", score, \" /\", ' ', ((_tests$find3 = tests.find(t => t.id === attemptTestId)) === null || _tests$find3 === void 0 ? void 0 : _tests$find3.questions.length) || ((_tests$find4 = tests.find(t => t.id === attemptTestId)) === null || _tests$find4 === void 0 ? void 0 : _tests$find4.questions.length) || 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",\n          onClick: () => setShowResult(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 31\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentDashboard, \"hvEbzpx+1k0E+rcupnh+sc0hNCM=\", false, function () {\n  return [useAuth];\n});\n_c = StudentDashboard;\nvar _c;\n$RefreshReg$(_c, \"StudentDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","collection","onSnapshot","doc","updateDoc","getDoc","setDoc","addDoc","serverTimestamp","db","jsxDEV","_jsxDEV","StudentDashboard","_s","_tests$find","_tests$find2","_tests$find3","_tests$find4","user","courses","setCourses","tests","setTests","purchased","setPurchased","attemptTestId","setAttemptTestId","attemptAnswers","setAttemptAnswers","timer","setTimer","showResult","setShowResult","score","setScore","loading","setLoading","userProfile","setUserProfile","fetchUserProfile","userDoc","uid","exists","userData","data","purchasedCourses","error","console","unsubscribe","snapshot","coursesData","forEach","push","id","sort","a","b","_a$uploadDate","_a$uploadDate$toDate","_b$uploadDate","_b$uploadDate$toDate","dateA","uploadDate","toDate","call","Date","dateB","testsData","handlePurchase","courseId","_courses$find","_courses$find2","newPurchased","userId","userEmail","email","courseTitle","find","c","title","purchaseDate","amount","price","alert","handleGetFree","_courses$find3","type","startAttempt","testId","Array","t","questions","length","fill","interval","setInterval","handleSubmitAttempt","clearInterval","handleAttemptChange","qIdx","value","prev","updated","Number","test","correct","q","idx","answer","testTitle","totalQuestions","answers","completedAt","formatDate","timestamp","date","toLocaleDateString","downloadCourse","course","fileUrl","window","open","className","children","fileName","_jsxFileName","lineNumber","columnNumber","filter","includes","map","details","uploaderEmail","onClick","description","disabled","onSubmit","e","preventDefault","question","options","opt","oIdx","name","checked","onChange","required","_c","$RefreshReg$"],"sources":["C:/Users/anjal/Downloads/lms/lms/src/pages/StudentDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { \r\n  collection, \r\n  onSnapshot, \r\n  doc, \r\n  updateDoc, \r\n  getDoc,\r\n  setDoc,\r\n  addDoc,\r\n  serverTimestamp \r\n} from 'firebase/firestore';\r\nimport { db } from '../utils/firebase';\r\n\r\nexport default function StudentDashboard() {\r\n  const { user } = useAuth();\r\n  \r\n  // State management\r\n  const [courses, setCourses] = useState([]);\r\n  const [tests, setTests] = useState([]);\r\n  const [purchased, setPurchased] = useState([]);\r\n  const [attemptTestId, setAttemptTestId] = useState(null);\r\n  const [attemptAnswers, setAttemptAnswers] = useState([]);\r\n  const [timer, setTimer] = useState(0);\r\n  const [showResult, setShowResult] = useState(false);\r\n  const [score, setScore] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [userProfile, setUserProfile] = useState(null);\r\n\r\n  // Fetch user profile and purchased courses\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const fetchUserProfile = async () => {\r\n      try {\r\n        const userDoc = await getDoc(doc(db, 'users', user.uid));\r\n        if (userDoc.exists()) {\r\n          const userData = userDoc.data();\r\n          setUserProfile(userData);\r\n          setPurchased(userData.purchasedCourses || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching user profile:', error);\r\n      }\r\n    };\r\n\r\n    fetchUserProfile();\r\n  }, [user]);\r\n\r\n  // Real-time listener for courses\r\n  useEffect(() => {\r\n    const unsubscribe = onSnapshot(collection(db, 'courses'), (snapshot) => {\r\n      const coursesData = [];\r\n      snapshot.forEach((doc) => {\r\n        coursesData.push({ id: doc.id, ...doc.data() });\r\n      });\r\n      // Sort by upload date (newest first)\r\n      coursesData.sort((a, b) => {\r\n        const dateA = a.uploadDate?.toDate?.() || new Date(a.uploadDate);\r\n        const dateB = b.uploadDate?.toDate?.() || new Date(b.uploadDate);\r\n        return dateB - dateA;\r\n      });\r\n      setCourses(coursesData);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // Real-time listener for tests\r\n  useEffect(() => {\r\n    const unsubscribe = onSnapshot(collection(db, 'tests'), (snapshot) => {\r\n      const testsData = [];\r\n      snapshot.forEach((doc) => {\r\n        testsData.push({ id: doc.id, ...doc.data() });\r\n      });\r\n      setTests(testsData);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // Purchase handler\r\n  const handlePurchase = async (courseId) => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const newPurchased = [...purchased, courseId];\r\n      setPurchased(newPurchased);\r\n\r\n      // Update user's purchased courses in Firebase\r\n      await updateDoc(doc(db, 'users', user.uid), {\r\n        purchasedCourses: newPurchased\r\n      });\r\n\r\n      // Log the purchase\r\n      await addDoc(collection(db, 'purchases'), {\r\n        userId: user.uid,\r\n        userEmail: user.email,\r\n        courseId: courseId,\r\n        courseTitle: courses.find(c => c.id === courseId)?.title,\r\n        purchaseDate: serverTimestamp(),\r\n        amount: courses.find(c => c.id === courseId)?.price || 0\r\n      });\r\n\r\n      alert('Course purchased successfully!');\r\n    } catch (error) {\r\n      console.error('Error purchasing course:', error);\r\n      alert('Error purchasing course. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Get free course handler\r\n  const handleGetFree = async (courseId) => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const newPurchased = [...purchased, courseId];\r\n      setPurchased(newPurchased);\r\n\r\n      // Update user's purchased courses in Firebase\r\n      await updateDoc(doc(db, 'users', user.uid), {\r\n        purchasedCourses: newPurchased\r\n      });\r\n\r\n      // Log the free course access\r\n      await addDoc(collection(db, 'purchases'), {\r\n        userId: user.uid,\r\n        userEmail: user.email,\r\n        courseId: courseId,\r\n        courseTitle: courses.find(c => c.id === courseId)?.title,\r\n        purchaseDate: serverTimestamp(),\r\n        amount: 0,\r\n        type: 'free'\r\n      });\r\n\r\n      alert('Free course added to your library!');\r\n    } catch (error) {\r\n      console.error('Error getting free course:', error);\r\n      alert('Error getting free course. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Test attempt handlers\r\n  const startAttempt = (testId) => {\r\n    setAttemptTestId(testId);\r\n    setAttemptAnswers(Array(tests.find(t => t.id === testId).questions.length).fill(null));\r\n    setShowResult(false);\r\n    setScore(0);\r\n    setTimer(60); // 60 seconds per test\r\n  };\r\n\r\n  useEffect(() => {\r\n    let interval = null;\r\n    if (attemptTestId && timer > 0) {\r\n      interval = setInterval(() => setTimer(t => t - 1), 1000);\r\n    }\r\n    if (timer === 0 && attemptTestId) {\r\n      handleSubmitAttempt();\r\n    }\r\n    return () => clearInterval(interval);\r\n    // eslint-disable-next-line\r\n  }, [attemptTestId, timer]);\r\n\r\n  const handleAttemptChange = (qIdx, value) => {\r\n    setAttemptAnswers(prev => {\r\n      const updated = [...prev];\r\n      updated[qIdx] = Number(value);\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const handleSubmitAttempt = async () => {\r\n    const test = tests.find(t => t.id === attemptTestId);\r\n    let correct = 0;\r\n    test.questions.forEach((q, idx) => {\r\n      if (attemptAnswers[idx] === q.answer) correct++;\r\n    });\r\n    setScore(correct);\r\n    setShowResult(true);\r\n\r\n    // Save test result to Firebase\r\n    try {\r\n      await addDoc(collection(db, 'testResults'), {\r\n        userId: user.uid,\r\n        userEmail: user.email,\r\n        testId: attemptTestId,\r\n        testTitle: test.title,\r\n        score: correct,\r\n        totalQuestions: test.questions.length,\r\n        answers: attemptAnswers,\r\n        completedAt: serverTimestamp()\r\n      });\r\n    } catch (error) {\r\n      console.error('Error saving test result:', error);\r\n    }\r\n\r\n    setAttemptTestId(null);\r\n    setTimer(0);\r\n  };\r\n\r\n  const formatDate = (timestamp) => {\r\n    if (!timestamp) return 'Unknown';\r\n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  const downloadCourse = (course) => {\r\n    // In a real app, this would handle file download from Firebase Storage\r\n    if (course.fileUrl && course.fileUrl !== '#') {\r\n      window.open(course.fileUrl, '_blank');\r\n    } else {\r\n      alert('Course file not available. Please contact support.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-xl\">Loading courses...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-6\">\r\n      <h2 className=\"text-3xl font-bold text-green-800 mb-2\">Student Dashboard</h2>\r\n      <p className=\"text-gray-600 mb-6\">Welcome back, {user?.email}!</p>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* Your Courses */}\r\n        <div className=\"bg-white p-6 shadow rounded-xl\">\r\n          <h3 className=\"text-xl font-semibold mb-4\">Your Courses ({purchased.length})</h3>\r\n          <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n            {purchased.length === 0 ? (\r\n              <div className=\"text-gray-400 text-center py-8\">\r\n                <p>No courses purchased yet.</p>\r\n                <p className=\"text-sm\">Browse available courses to get started!</p>\r\n              </div>\r\n            ) : (\r\n              courses.filter(c => purchased.includes(c.id)).map(course => (\r\n                <div key={course.id} className=\"border rounded-lg p-4\">\r\n                  <h4 className=\"font-semibold text-lg mb-2\">{course.title}</h4>\r\n                  <p className=\"text-sm text-gray-600 mb-2\">{course.details}</p>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      <span>Uploaded: {formatDate(course.uploadDate)}</span>\r\n                      <span className=\"ml-2\">By: {course.uploaderEmail}</span>\r\n                    </div>\r\n                                        <button\r\n                                          className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n                                          onClick={() => downloadCourse(course)}\r\n                                        >\r\n                                          Download\r\n                                        </button>\r\n                                      </div>\r\n                                    </div>\r\n                                  ))\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                            {/* Available Courses */}\r\n                            <div className=\"bg-white p-6 shadow rounded-xl\">\r\n                              <h3 className=\"text-xl font-semibold mb-4\">Available Courses</h3>\r\n                              <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n                                {courses.filter(c => !purchased.includes(c.id)).length === 0 ? (\r\n                                  <div className=\"text-gray-400 text-center py-8\">\r\n                                    <p>All available courses have been added to your library.</p>\r\n                                  </div>\r\n                                ) : (\r\n                                  courses.filter(c => !purchased.includes(c.id)).map(course => (\r\n                                    <div key={course.id} className=\"border rounded-lg p-4\">\r\n                                      <h4 className=\"font-semibold text-lg mb-2\">{course.title}</h4>\r\n                                      <p className=\"text-sm text-gray-600 mb-2\">{course.details}</p>\r\n                                      <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"text-xs text-gray-500\">\r\n                                          <span>Uploaded: {formatDate(course.uploadDate)}</span>\r\n                                          <span className=\"ml-2\">By: {course.uploaderEmail}</span>\r\n                                        </div>\r\n                                        {course.price > 0 ? (\r\n                                          <button\r\n                                            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n                                            onClick={() => handlePurchase(course.id)}\r\n                                          >\r\n                                            Buy â‚¹{course.price}\r\n                                          </button>\r\n                                        ) : (\r\n                                          <button\r\n                                            className=\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700\"\r\n                                            onClick={() => handleGetFree(course.id)}\r\n                                          >\r\n                                            Get Free\r\n                                          </button>\r\n                                        )}\r\n                                      </div>\r\n                                    </div>\r\n                                  ))\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                    \r\n                          {/* Tests Section */}\r\n                          <div className=\"bg-white p-6 shadow rounded-xl mt-8\">\r\n                            <h3 className=\"text-xl font-semibold mb-4\">Tests</h3>\r\n                            <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n                              {tests.length === 0 ? (\r\n                                <div className=\"text-gray-400 text-center py-8\">\r\n                                  <p>No tests available at the moment.</p>\r\n                                </div>\r\n                              ) : (\r\n                                tests.map(test => (\r\n                                  <div key={test.id} className=\"border rounded-lg p-4\">\r\n                                    <h4 className=\"font-semibold text-lg mb-2\">{test.title}</h4>\r\n                                    <p className=\"text-sm text-gray-600 mb-2\">{test.description}</p>\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                      <div className=\"text-xs text-gray-500\">\r\n                                        <span>Questions: {test.questions.length}</span>\r\n                                      </div>\r\n                                      <button\r\n                                        className=\"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700\"\r\n                                        onClick={() => startAttempt(test.id)}\r\n                                        disabled={attemptTestId !== null}\r\n                                      >\r\n                                        Attempt\r\n                                      </button>\r\n                                    </div>\r\n                                  </div>\r\n                                ))\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                    \r\n                          {/* Test Attempt Modal */}\r\n                          {attemptTestId && (\r\n                            <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n                              <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-lg\">\r\n                                <h3 className=\"text-xl font-semibold mb-4\">\r\n                                  Attempt Test: {tests.find(t => t.id === attemptTestId)?.title}\r\n                                </h3>\r\n                                <div className=\"mb-4 text-right text-sm text-gray-600\">\r\n                                  Time left: {timer}s\r\n                                </div>\r\n                                <form\r\n                                  onSubmit={e => {\r\n                                    e.preventDefault();\r\n                                    handleSubmitAttempt();\r\n                                  }}\r\n                                >\r\n                                  {tests\r\n                                    .find(t => t.id === attemptTestId)\r\n                                    ?.questions.map((q, idx) => (\r\n                                      <div key={idx} className=\"mb-4\">\r\n                                        <div className=\"font-medium mb-2\">\r\n                                          Q{idx + 1}: {q.question}\r\n                                        </div>\r\n                                        <div className=\"space-y-1\">\r\n                                          {q.options.map((opt, oIdx) => (\r\n                                            <label key={oIdx} className=\"block\">\r\n                                              <input\r\n                                                type=\"radio\"\r\n                                                name={`q${idx}`}\r\n                                                value={oIdx}\r\n                                                checked={attemptAnswers[idx] === oIdx}\r\n                                                onChange={() => handleAttemptChange(idx, oIdx)}\r\n                                                className=\"mr-2\"\r\n                                                required\r\n                                              />\r\n                                              {opt}\r\n                                            </label>\r\n                                          ))}\r\n                                        </div>\r\n                                      </div>\r\n                                    ))}\r\n                                  <div className=\"flex justify-end space-x-2 mt-6\">\r\n                                    <button\r\n                                      type=\"button\"\r\n                                      className=\"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400\"\r\n                                      onClick={() => {\r\n                                        setAttemptTestId(null);\r\n                                        setTimer(0);\r\n                                      }}\r\n                                    >\r\n                                      Cancel\r\n                                    </button>\r\n                                    <button\r\n                                      type=\"submit\"\r\n                                      className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n                                    >\r\n                                      Submit\r\n                                    </button>\r\n                                  </div>\r\n                                </form>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                    \r\n                          {/* Test Result Modal */}\r\n                          {showResult && (\r\n                            <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n                              <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n                                <h3 className=\"text-xl font-semibold mb-4\">Test Result</h3>\r\n                                <div className=\"mb-4\">\r\n                                  <span className=\"font-bold\">Score:</span> {score} /{' '}\r\n                                  {tests.find(t => t.id === attemptTestId)?.questions.length || tests.find(t => t.id === attemptTestId)?.questions.length || 0}\r\n                                </div>\r\n                                <button\r\n                                  className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n                                  onClick={() => setShowResult(false)}\r\n                                >\r\n                                  Close\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}